define(["Util"],function(t){function i(t,i,n,e){return(t/=e/2)<1?n/2*t*t*t*t+i:-n/2*((t-=2)*t*t*t-2)+i}function n(t,i,n,e){return 0==t?i:t==e?i+n:(t/=e/2)<1?n/2*Math.pow(2,10*(t-1))+i:n/2*(2-Math.pow(2,-10*--t))+i}function e(t,i,n,e){return n*(t/=e)*t*t+i}function s(t){this.pop_wrap=null,this.pop_win=null,this.pop_win_mask=null,this.animateTimer=null,this.step=8,this.status="close",this.animateStatus="stop",this.init(),this.initUI(),this.initEvent()}return s.prototype.init=function(i){var n=t.$$("toolsPanel"),e=this.toolsPanelCon=t.$$("toolsPanelCon");this.items=t.$("tools_item",e),this.pop_wrap=t.$("pop_wrap",n)[0],this.pop_win=t.$("pop_win",n)[0],this.pop_win_mask=t.$("pop_win_mask",n)[0],this.transitionSupport=t.transitionCheck()},s.prototype.initUI=function(){var t,i=this.items,n=0;for(i.length;n<4;n++)i[n].style.position="relative",(t=i[n].getElementsByTagName("a")[0]).style.position="absolute",t.style.left=0,t.style.top=0,i[n].atag=t},s.prototype.initEvent=function(){var i=this,n=this.items,e=0;for(n.length;e<4;e++)n[e]._minus=t.$("ico_minus",n[e])[0],n[e].index=e,n[e].onmouseover=function(){i.changeStyle(this),"close"==i.status&&"stop"==i.animateStatus&&i.open()};for(var s=t.$("close",this.pop_wrap),e=0;e<s.length;e++)s[e].onclick=function(){i.close()}},s.prototype.changeStyle=function(i){var n=t.$("active_title",toolsPanelCon);0!=n.length&&t.removeClass(n[0],"active_title");var e=t.$("title",i)[0];t.addClass(e,"active_title"),this.pop_wrap.style.top=185*-i.index+"px"},s.prototype.open=function(){this.pop_win_mask.style.display="block",this.animateStatus="runing",this.animate("open")},s.prototype.close=function(){this.pop_win_mask.style.display="block";var i=t.$("active_title",toolsPanelCon);0!=i.length&&t.removeClass(i[0],"active_title"),this.animate("close")},s.prototype.animate=function(t){clearInterval(this.animateTimer);var s=this,o=this.items,a=0,l=20;this.animateTimer=setInterval(function(){var p,r,h,u,m,c;"open"==t?(p=e(a,0,-38,l),c=i(a,-185,185,l)):(p=e(a,-38,38,l),c=i(a,0,-185,l));var _=0;for(o.length;_<4;_++)o[_]._minus&&("open"==t?(r=n(a,0,42,l),h=n(a,13,-9,l),u=n(a,16,-12,l),m=n(a,0,2,l),o[_]._minus.childNodes[0].style.display="none",o[_]._minus.childNodes[1].style.display="none"):(r=e(a,42,-42,l),h=e(a,4,9,l),u=e(a,4,12,l),m=e(a,2,-2,l),o[_]._minus.childNodes[0].style.display="block",o[_]._minus.childNodes[1].style.display="block"),o[_]._minus.style.top=r+"px",o[_]._minus.style.right=m+"px",o[_]._minus.style.width=h+"px",o[_]._minus.style.height=u+"px"),o[_].atag.style.top=p+"px",s.pop_win.style.bottom=c+"px";++a>l&&(clearInterval(s.animateTimer),s.pop_win_mask.style.display="none",s.status=t,s.animateStatus="stop")},10)},s});